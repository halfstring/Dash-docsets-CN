<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>命令行模式的选项参数</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />

 </head>
 <body class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="features.commandline.differences.html">« 和其它 SAPI 模块的区别</a></li>
      <li style="float: right;"><a href="features.commandline.usage.html">用法 »</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="features.commandline.html">PHP 的命令行模式</a></li>
    <li>命令行模式的选项参数</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="features.commandline.options" class="section">

<h2 class="title">命令行模式的选项参数</h2>


 <p class="para">
  以下是 PHP 二进制文件提供的命令行模式的选项参数，随时可以运行带
  <strong class="option unknown">-h</strong> 参数的 PHP 命令来查询这些参数。
  <div class="example-contents screen">
<div class="cdata"><pre>
Usage: php [options] [-f] &lt;file&gt; [--] [args...]
   php [options] -r &lt;code&gt; [--] [args...]
   php [options] [-B &lt;begin_code&gt;] -R &lt;code&gt; [-E &lt;end_code&gt;] [--] [args...]
   php [options] [-B &lt;begin_code&gt;] -F &lt;file&gt; [-E &lt;end_code&gt;] [--] [args...]
   php [options] -- [args...]
   php [options] -a

  -a               Run interactively
  -c &lt;path&gt;|&lt;file&gt; Look for php.ini file in this directory
  -n               No php.ini file will be used
  -d foo[=bar]     Define INI entry foo with value &#039;bar&#039;
  -e               Generate extended information for debugger/profiler
  -f &lt;file&gt;        Parse and execute &lt;file&gt;.
  -h               This help
  -i               PHP information
  -l               Syntax check only (lint)
  -m               Show compiled in modules
  -r &lt;code&gt;        Run PHP &lt;code&gt; without using script tags &lt;?..?&gt;
  -B &lt;begin_code&gt;  Run PHP &lt;begin_code&gt; before processing input lines
  -R &lt;code&gt;        Run PHP &lt;code&gt; for every input line
  -F &lt;file&gt;        Parse and execute &lt;file&gt; for every input line
  -E &lt;end_code&gt;    Run PHP &lt;end_code&gt; after processing all input lines
  -H               Hide any passed arguments from external tools.
  -S &lt;addr&gt;:&lt;port&gt; Run with built-in web server.
  -t &lt;docroot&gt;     Specify document root &lt;docroot&gt; for built-in web server.
  -s               Output HTML syntax highlighted source.
  -v               Version number
  -w               Output source with stripped comments and whitespace.
  -z &lt;file&gt;        Load Zend extension &lt;file&gt;.

  args...          Arguments passed to script. Use -- args when first argument
                   starts with - or script is read from stdin

  --ini            Show configuration file names

  --rf &lt;name&gt;      Show information about function &lt;name&gt;.
  --rc &lt;name&gt;      Show information about class &lt;name&gt;.
  --re &lt;name&gt;      Show information about extension &lt;name&gt;.
  --rz &lt;name&gt;      Show information about Zend extension &lt;name&gt;.
  --ri &lt;name&gt;      Show configuration for extension &lt;name&gt;.
</pre></div>
  </div>
 </p>

<p class="para">
 <table class="doctable table">
  <caption><strong>命令行选项</strong></caption>
  
   <thead>
    <tr>
     <th>选项名称</th>
     <th>长名称</th>
     <th>说明</th>
    </tr>

   </thead>

   <tbody class="tbody">
    <tr>
     <td>-a</td>
     <td>--interactive</td>
     <td>
      <p class="para">
       交互式运行 PHP。For more information, see the <a href="features.commandline.interactive.html" class="link">Interactive shell</a>
       section.
      </p>
     </td>
    </tr>

    <tr>
     <td>-b</td>
     <td>--bindpath</td>
     <td>
      <p class="para">
       Bind Path for external FASTCGI Server mode (<acronym title="Common Gateway Interface">CGI</acronym>
       only).
      </p>
     </td>
    </tr>

    <tr>
     <td>-C</td>
     <td>--no-chdir</td>
     <td>
      <p class="para">
       Do not chdir to the script&#039;s directory (<acronym title="Common Gateway Interface">CGI</acronym> only).
      </p>
     </td>
    </tr>

    <tr>
     <td>-q</td>
     <td>--no-header</td>
     <td>
      <p class="para">
       Quiet-mode. Suppress <acronym title="Hypertext Transfer Protocol">HTTP</acronym> header output
       (<acronym title="Common Gateway Interface">CGI</acronym> only).
      </p>
     </td>
    </tr>

    <tr>
     <td>-T</td>
     <td>--timing</td>
     <td>
      <p class="para">
       Measure execution time of script repeated <var class="varname">count</var>
       times (<acronym title="Common Gateway Interface">CGI</acronym> only).
      </p>
     </td>
    </tr>

    <tr>
     <td>-c</td>
     <td>--php-ini</td>
     <td>
      <p class="para">
       用该参数，可以指定一个放置 <var class="filename">php.ini</var>
       文件的目录，或者直接指定一个自定义的 <code class="literal">INI</code>
       文件（其文件名可以不是 <var class="filename">php.ini</var>），例如：
      </p>
      <p class="para"><div class="informalexample">
       <div class="example-contents screen">
        <div class="cdata"><pre>
$ php -c /custom/directory/ my_script.php

$ php -c /custom/directory/custom-file.ini my_script.php
</pre></div>
       </div>
      </div></p>
      <p class="para">
       如果不指定此选项，<var class="filename">php.ini</var> 将在<a href="configuration.file.html" class="link">默认位置</a> 搜索。
      </p>
     </td>
    </tr>

    <tr>
     <td>-n</td>
     <td>--no-php-ini</td>
     <td>
      <p class="para">
       完全忽略 <var class="filename">php.ini</var>。
      </p>
     </td>
    </tr>

    <tr>
     <td>-d</td>
     <td>--define</td>
     <td>
      <p class="para">
       用该参数可以自行设置任何可以在 <var class="filename">php.ini</var>
       文件中设置的配置选项的值，其语法为：
       <div class="example-contents screen">
        <div class="cdata"><pre>
 -d configuration_directive[=value]
 </pre></div>
       </div>
      </p>
      <p class="para"><div class="example" id="example-445">
       <div class="example-contents screen">
        <div class="cdata"><pre>
# 取值部分被省略，将会把配置选项设为 &quot;1&quot;
$ php -d max_execution_time
        -r &#039;$foo = ini_get(&quot;max_execution_time&quot;); var_dump($foo);&#039;
string(1) &quot;1&quot;

# 取值部分为空白，将会把配置选项设为 &quot;&quot;
php -d max_execution_time=
        -r &#039;$foo = ini_get(&quot;max_execution_time&quot;); var_dump($foo);&#039;
string(0) &quot;&quot;

# 配置选项将被设置成为任何 &#039;=&#039; 字符之后的值
$  php -d max_execution_time=20
        -r &#039;$foo = ini_get(&quot;max_execution_time&quot;); var_dump($foo);&#039;
string(2) &quot;20&quot;
$  php
        -d max_execution_time=doesntmakesense
        -r &#039;$foo = ini_get(&quot;max_execution_time&quot;); var_dump($foo);&#039;
string(15) &quot;doesntmakesense&quot;
</pre></div>
       </div>
      </div></p>
     </td>
    </tr>

    <tr>
     <td>-e</td>
     <td>--profile-info</td>
     <td>
      <p class="para">
       激活扩展信息模式，被用于调试／测试。
      </p>
     </td>
    </tr>

    <tr>
     <td>-f</td>
     <td>--file</td>
     <td>
      <p class="para">
       解析并运行 <strong class="option unknown">-f</strong>
       选项给定的文件名。该参数为可选参数，可以省略，仅指明需要运行的文件名即可。
      </p>
     </td>
    </tr>

    <tr>
     <td>-h and -?</td>
     <td>--help and --usage</td>
     <td>
      使用该参数，可以得到完整的命令行参数的列表及这些参数作用的简单描述。
     </td>
    </tr>

    <tr>
     <td>-i</td>
     <td>--info</td>
     <td>
      该命令行参数会调用 <span class="function"><a href="function.phpinfo.html" class="function">phpinfo()</a></span>
      函数并显示出结果。如果 PHP 没有正常工作，建议执行
      <strong class="command">php -i</strong>
      命令来查看在信息表格之前或者对应的地方是否有任何错误信息输出。请注意当使用
      <acronym title="Common Gateway Interface">CGI</acronym> 摸索时，输出的内容为 <acronym title="Hyper Text Markup Language">HTML</acronym>
      格式，因此输出的信息篇幅较大。
     </td>
    </tr>

    <tr>
     <td>-l</td>
     <td>--syntax-check</td>
     <td>
      <p class="para">
       该参数提供了对指定 PHP
       代码进行语法检查的方便的方法。如果成功，则向标准输出写入
       <code class="literal">No syntax errors detected in &lt;filename&gt;</code>
       字符串，并且外壳返回值为
       <code class="literal">0</code>。如果失败，则输出
       <code class="literal">Errors parsing
        &lt;filename&gt;</code>
       以及内部解析器错误信息到标准输出，同时外壳返回值将别设置为
       <code class="literal">-1</code>。
      </p>
      <p class="para">
       该参数将无法检查致命错误（如未定义函数），如果也希望检测致命错误，请使用
       <strong class="option unknown">-f</strong> 参数。
      </p>
      <blockquote class="note"><p><strong class="note">注意</strong>: 
       <p class="para">
        该参数不能和 <strong class="option unknown">-r</strong> 一同使用。
       </p>
      </p></blockquote>
     </td>
    </tr>

    <tr>
     <td>-m</td>
     <td>--modules</td>
     <td>
      <p class="para"><div class="example" id="example-446">
       <p><strong>示例 #1 使用该参数，PHP 将打印出内置以及已加载的 PHP 及 Zend 模块：</strong></p>
       <div class="example-contents screen">
        <div class="cdata"><pre>
$ php -m
[PHP Modules]
xml
tokenizer
standard
session
posix
pcre
overload
mysql
mbstring
ctype

[Zend Modules]
</pre></div>
       </div>
      </div></p>
     </td>
    </tr>

    <tr>
     <td>-r</td>
     <td>--run</td>
     <td>
      <p class="para">
       使用该参数可以在命令行内运行单行 PHP
       代码。<em class="emphasis">无需</em>加上 PHP
       的起始和结束标识符（<code class="literal">&lt;?php</code> 和
       <code class="literal">?&gt;</code>），否则将会导致语法解析错误。
      </p>
      <blockquote class="note"><p><strong class="note">注意</strong>: 
       <p class="para">
        使用这种形式的 PHP 时，应注意避免和外壳环境进行的命令行参数替换相冲突。
       </p>
       <div class="example" id="example-447">
        <p><strong>示例 #2 显示双引号语法解析错误的范例</strong></p>
        <div class="example-contents screen">
         <div class="cdata"><pre>
$ php -r &quot;$foo = get_defined_constants();&quot;
Command line code(1) : Parse error - parse error, unexpected &#039;=&#039;
</pre></div>
        </div>
       </div>
       <p class="para">
        这里的问题在于即使使用了双引号
        <code class="literal">&quot;</code>，sh/bash 仍然实行了参数替换。由于
        <var class="varname">$foo</var>
        没有被定义，被替换后它所在的位置变成了空字符，因此在运行时，实际被
        PHP 读取的代码为：
       </p>
       <div class="informalexample">
        <div class="example-contents screen">
         <div class="cdata"><pre>
$ php -r &quot; = get_defined_constants();&quot;
</pre></div>
        </div>
       </div>

       <p class="para">
        正确的方法是使用单引号
        <code class="literal">&#039;</code>。在用单引号引用的字符串中，变量不会被
        sh/bash 还原成其原值。
       </p>
       <div class="example" id="example-448">
        <p><strong>示例 #3 Using single quotes to prevent the shell&#039;s variable
         substitution</strong></p>
        <div class="example-contents screen">
         <div class="cdata"><pre>
$ php -r &#039;$foo = get_defined_constants(); var_dump($foo);&#039;
array(370) {
  [&quot;E_ERROR&quot;]=&gt;
  int(1)
  [&quot;E_WARNING&quot;]=&gt;
  int(2)
  [&quot;E_PARSE&quot;]=&gt;
  int(4)
  [&quot;E_NOTICE&quot;]=&gt;
  int(8)
  [&quot;E_CORE_ERROR&quot;]=&gt;
  [...]
</pre></div>
        </div>
       </div>
       <p class="para">
        如果使用的外壳不是 sh/bash，可能会碰到更多问题。请将碰到的 Bug
        向 <a href="https://github.com/php/php-src/issues" class="link external">&raquo;&nbsp;https://github.com/php/php-src/issues</a>
        报告。注意，当试图将 shell 变量用到代码中或者使用反斜线时仍然很容易碰到问题。
       </p>
      </p></blockquote>
      <blockquote class="note"><p><strong class="note">注意</strong>: 
       <p class="para">
        <strong class="option unknown">-r</strong> 在 <acronym title="Command Line Interpreter/Interface">CLI</acronym> <acronym title="Server Application Programming Interface">SAPI</acronym>
        中有效，在 <em class="emphasis">CGI</em> <acronym title="Server Application Programming Interface">SAPI</acronym> 中无效。
       </p>
      </p></blockquote>
      <blockquote class="note"><p><strong class="note">注意</strong>: 
       <p class="para">
        此选项只用于非常基本的用途。因此一些配置指令（例如 <a href="ini.core.html#ini.auto-prepend-file" class="link">auto_prepend_file</a> 和 <a href="ini.core.html#ini.auto-append-file" class="link">auto_append_file</a>）在此模式下被忽略。
       </p>
      </p></blockquote>
     </td>
    </tr>

    <tr>
     <td>-B</td>
     <td>--process-begin</td>
     <td>
      <p class="para">
       在处理 stdin 之前先执行 PHP 代码。
      </p>
     </td>
    </tr>

    <tr>
     <td>-R</td>
     <td>--process-code</td>
     <td>
      <p class="para">
       对每个输入行都执行 PHP 代码。
      </p>
      <p class="para">
       此模式下有两个特殊变量：<var class="varname">$argn</var>
       和 <var class="varname">$argi</var>。<var class="varname">$argn</var>
       包含 PHP 当前处理的行内容，而
       <var class="varname">$argi</var> 则包含该行号。
      </p>
     </td>
    </tr>

    <tr>
     <td>-F</td>
     <td>--process-file</td>
     <td>
      <p class="para">
       对每个输入行都执行 PHP 文件。
      </p>
     </td>
    </tr>

    <tr>
     <td>-E</td>
     <td>--process-end</td>
     <td>
      <p class="para">
       在处理完输入后执行的 PHP 代码。
      </p>
      <p class="para"><div class="example" id="example-449">
       <p><strong>示例 #4 
        使用 <strong class="option unknown">-B</strong>，<strong class="option unknown">-R</strong> 和
        <strong class="option unknown">-E</strong> 选项来计算一个项目总行数的例子。
       </strong></p>
       <div class="example-contents screen">
        <div class="cdata"><pre>
$ find my_proj | php -B &#039;$l=0;&#039; -R &#039;$l += count(@file($argn));&#039; -E &#039;echo &quot;Total Lines: $l\n&quot;;&#039;
Total Lines: 37328
</pre></div>
       </div>
      </div></p>
     </td>
    </tr>

    <tr>
     <td>-S</td>
     <td>--server</td>
     <td>
      <p class="para">
       Starts <a href="features.commandline.webserver.html" class="link">built-in web
       server</a>.
      </p>
     </td>
    </tr>

    <tr>
     <td>-t</td>
     <td>--docroot</td>
     <td>
      Specifies document root for <a href="features.commandline.webserver.html" class="link">built-in web server</a>.
     </td>
    </tr>

    <tr>
     <td>-s</td>
     <td>--syntax-highlight and --syntax-highlighting</td>
     <td>
      <p class="para">
       显示有语法高亮色彩的源代码。
      </p>
      <p class="para">
       该参数使用内建机制来解析文件并为其生成一个 HTML
       高亮版本并将结果写到标准输出。请注意该过程所做的只是生成了一个
       <code class="literal">&lt;code&gt; [...] &lt;/code&gt;</code> 的
       HTML 标记的块，并不包含任何的 HTML 头。
      </p>
      <blockquote class="note"><p><strong class="note">注意</strong>: 
       <p class="para">
        该选项不能和 <strong class="option unknown">-r</strong> 参数同时使用。
       </p>
      </p></blockquote>
     </td>
    </tr>

    <tr>
     <td>-v</td>
     <td>--version</td>
     <td>
      <p class="para"><div class="example" id="example-450">
       <p><strong>示例 #5 
        使用 <strong class="option unknown">-v</strong> 将 PHP、<acronym title="Server Application Programming Interface">SAPI</acronym> 名称和 Zend 的版本信息写入标准输出。
       </strong></p>
       <div class="example-contents screen">
        <div class="cdata"><pre>
$ php -v
PHP 5.3.1 (cli) (built: Dec 11 2009 19:55:07)
Copyright (c) 1997-2009 The PHP Group
Zend Engine v2.3.0, Copyright (c) 1998-2009 Zend Technologies
</pre></div>
       </div>
      </div></p>
     </td>
    </tr>

    <tr>
     <td>-w</td>
     <td>--strip</td>
     <td>
      <p class="para">
       显示除去了注释和多余空白的源代码。
      </p>
      <blockquote class="note"><p><strong class="note">注意</strong>: 
       <p class="para">
        该选项不能和 <strong class="option unknown">-r</strong> 参数同时使用。
       </p>
      </p></blockquote>
     </td>
    </tr>

    <tr>
     <td>-z</td>
     <td>--zend-extension</td>
     <td>
      <p class="para">
       加载 Zend 扩展库。如果仅给定一个文件名，PHP
       将试图从当前系统扩展库的默认路径（在 Linux
       系统下，该路径通常由 <var class="filename">/etc/ld.so.conf</var>
       指定）加载该扩展库。如果用一个绝对路径指定文件名，则不会使用系统的扩展库默认路径。如果用相对路径指定的文件名，则
       PHP 仅试图在当前目录的相对目录加载扩展库。
      </p>
     </td>
    </tr>

    <tr>
     <td class="empty">&nbsp;</td>
     <td>--ini</td>
     <td>
      <p class="para">
       Show configuration file names and scanned directories.
       <div class="example" id="example-451">
        <p><strong>示例 #6 <code class="literal">--ini</code> example</strong></p>
        <div class="example-contents">
         <div class="shellcode"><pre class="shellcode">$ php --ini
Configuration File (php.ini) Path: /usr/dev/php/5.2/lib
Loaded Configuration File:         /usr/dev/php/5.2/lib/php.ini
Scan for additional .ini files in: (none)
Additional .ini files parsed:      (none)</pre>
</div>
        </div>

       </div>
      </p>
     </td>
    </tr>

    <tr>
     <td>--rf</td>
     <td>--rfunction</td>
     <td>
      <p class="para">
       Show information about the given function or class method (e.g.
       number and name of the parameters).
      </p>
      <p class="para">
       This option is only available if PHP was compiled with
       <a href="book.reflection.html" class="link">Reflection</a> support.
      </p>
      <p class="para">
       <div class="example" id="example-452">
        <p><strong>示例 #7 basic <code class="literal">--rf</code> usage</strong></p>
        <div class="example-contents">
         <div class="shellcode"><pre class="shellcode">$ php --rf var_dump
Function [ &lt;internal&gt; public function var_dump ] {

  - Parameters [2] {
    Parameter #0 [ &lt;required&gt; $var ]
    Parameter #1 [ &lt;optional&gt; $... ]
  }
}</pre>
</div>
        </div>

       </div>
      </p>
     </td>
    </tr>

    <tr>
     <td>--rc</td>
     <td>--rclass</td>
     <td>
      <p class="para">
       Show information about the given class (list of constants, properties
       and methods).
      </p>
      <p class="para">
       This option is only available if PHP was compiled with
       <a href="book.reflection.html" class="link">Reflection</a> support.
      </p>
      <p class="para">
       <div class="example" id="example-453">
        <p><strong>示例 #8 <code class="literal">--rc</code> example</strong></p>
        <div class="example-contents">
         <div class="shellcode"><pre class="shellcode">$ php --rc Directory
Class [ &lt;internal:standard&gt; class Directory ] {

  - Constants [0] {
  }

  - Static properties [0] {
  }

  - Static methods [0] {
  }

  - Properties [0] {
  }

  - Methods [3] {
    Method [ &lt;internal&gt; public method close ] {
    }

    Method [ &lt;internal&gt; public method rewind ] {
    }

    Method [ &lt;internal&gt; public method read ] {
    }
  }
}</pre>
</div>
        </div>

       </div>
      </p>
     </td>
    </tr>

    <tr>
     <td>--re</td>
     <td>--rextension</td>
     <td>
      <p class="para">
       Show information about the given extension (list of <var class="filename">php.ini</var> options,
       defined functions, constants and classes).
      </p>
      <p class="para">
       This option is only available if PHP was compiled with
       <a href="book.reflection.html" class="link">Reflection</a> support.
      </p>
      <p class="para">
       <div class="example" id="example-454">
        <p><strong>示例 #9 <code class="literal">--re</code> example</strong></p>
        <div class="example-contents">
         <div class="shellcode"><pre class="shellcode">$ php --re json
Extension [ &lt;persistent&gt; extension #19 json version 1.2.1 ] {

  - Functions {
    Function [ &lt;internal&gt; function json_encode ] {
    }
    Function [ &lt;internal&gt; function json_decode ] {
    }
  }
}</pre>
</div>
        </div>

       </div>
      </p>
     </td>
    </tr>

    <tr>
     <td>--rz</td>
     <td>--rzendextension</td>
     <td>
      <p class="para">
       Show the configuration information for the given Zend extension (the
       same information that is returned by <span class="function"><a href="function.phpinfo.html" class="function">phpinfo()</a></span>).
      </p>
     </td>
    </tr>

    <tr>
     <td>--ri</td>
     <td>--rextinfo</td>
     <td>
      <p class="para">
       Show the configuration information for the given extension (the same
       information that is returned by <span class="function"><a href="function.phpinfo.html" class="function">phpinfo()</a></span>).
       The core configuration information
       is available using &quot;main&quot; as extension name.
      </p>
      <p class="para">
       <div class="example" id="example-455">
        <p><strong>示例 #10 <code class="literal">--ri</code> example</strong></p>
        <div class="example-contents">
         <div class="shellcode"><pre class="shellcode">$ php --ri date

date

date/time support =&gt; enabled
&quot;Olson&quot; Timezone Database Version =&gt; 2009.20
Timezone Database =&gt; internal
Default timezone =&gt; Europe/Oslo

Directive =&gt; Local Value =&gt; Master Value
date.timezone =&gt; Europe/Oslo =&gt; Europe/Oslo
date.default_latitude =&gt; 59.930972 =&gt; 59.930972
date.default_longitude =&gt; 10.776699 =&gt; 10.776699
date.sunset_zenith =&gt; 90.583333 =&gt; 90.583333
date.sunrise_zenith =&gt; 90.583333 =&gt; 90.583333</pre>
</div>
        </div>

       </div>
      </p>
     </td>
    </tr>

   </tbody>
  
 </table>

</p>

<blockquote class="note"><p><strong class="note">注意</strong>: 
 <p class="para">
  Options <code class="literal">-rBRFEH</code>, <code class="literal">--ini</code> and
  <code class="literal">--r[fcezi]</code> are available only in <acronym title="Command Line Interpreter/Interface">CLI</acronym>.
 </p>
</p></blockquote>
</div></div></div></body></html>